<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="global.css">
  <link rel="stylesheet" href="schedule.css">
  <link rel="icon" type="image/svg+xml" href="img/TOVA_favicon.svg">
  <title>TOVA Schedule App</title>
</head>

<body>

  <!-- HERO -->
  <section class="schedule-hero">
    <div class="hero-inner">
      <h1 class="hero-title">Organize Your Life with<br>TOVA Schedule App</h1>
      <p class="hero-desc">
        Plan your tasks, track progress, and visualize your schedule in a clean and smart interface.
      </p>
      <a href="signup.html" class="btn btn-mint hero-btn">Start Planning</a>
    </div>

    <div class="hero-graphic"></div>
  </section>

  <!-- Highlights -->
  <section class="highlights">
    <div class="highlight-grid">

      <div class="highlight-card card">
        <i class="fa-solid fa-calendar-check highlight-icon"></i>
        <h3>Smart Calendar</h3>
        <p>Color-coded events, auto-sorting, and quick editing tools.</p>
      </div>

      <div class="highlight-card card">
        <i class="fa-solid fa-list-check highlight-icon"></i>
        <h3>Task Manager</h3>
        <p>Track daily tasks and boost productivity with simple workflows.</p>
      </div>

      <div class="highlight-card card">
        <i class="fa-solid fa-bell highlight-icon"></i>
        <h3>Reminders</h3>
        <p>Never miss important events with customizable alerts.</p>
      </div>

      <div class="highlight-card card">
        <i class="fa-solid fa-cloud highlight-icon"></i>
        <h3>Cloud Sync</h3>
        <p>Your schedule is always backed up and available anywhere.</p>
      </div>

    </div>
  </section>

  <!-- Calendar Mock UI -->
  <section class="schedule-preview">
    <h2 class="section-title">See Your Week at a Glance</h2>

    <div class="preview-box">
      <img src="https://via.placeholder.com/900x480?text=Weekly+Calendar+Preview" alt="Calendar Preview">
    </div>
  </section>

  <!-- How it works -->
  <section class="how-schedule">
    <h2 class="section-title">How It Works</h2>

    <div class="how-grid">
      <div class="card how-card">
        <h3>1. Add Tasks & Events</h3>
        <p>Create tasks with deadlines or schedule events directly on the calendar.</p>
      </div>

      <div class="card how-card">
        <h3>2. Organize with Tags</h3>
        <p>Color labels help you identify work, school, gym, or personal plans easily.</p>
      </div>

      <div class="card how-card">
        <h3>3. Set Reminders</h3>
        <p>Get notified at the perfect timing so you never forget anything important.</p>
      </div>

      <div class="card how-card">
        <h3>4. Track Progress</h3>
        <p>Visualize completed tasks to stay motivated and productive.</p>
      </div>
    </div>
  </section>

  <!-- CTA -->
  <section class="schedule-cta">
    <h2>Start Managing Your Time Effectively</h2>
    <a href="signup.html" class="btn btn-mint cta-btn">Create Free Account</a>
  </section>

  <!-- Todo List Section -->
  <section class="todo-section fade-in">
    <div class="container">
      <h2 class="section-title text-center">My Tasks</h2>

      <div class="todo-container glass">
        <div class="todo-input-group">
          <input type="text" id="task-input" class="input" placeholder="Add a new task...">
          <button id="add-task-btn" class="btn btn-mint">Add</button>
        </div>

        <ul id="todo-list" class="todo-list">
          <!-- Tasks will be added here dynamically -->
        </ul>
      </div>
    </div>
  </section>

  <footer>
    <a href="company.html">Company</a>
    <a href="pricing.html">Pricing</a>
    <a href="api.html">API</a>
    <a href="blog.html">Dev Blog</a>
    <a href="contact.html">Contact</a>
    <br><br>
    Â© 2025 TOVA Inc. All rights reserved.
  </footer>

  <script src="https://kit.fontawesome.com/efe6c5ccc5.js" crossorigin="anonymous"></script>
</body>
<script type="module" src="firebase-config.js"></script>
<script type="module">
  import { db, auth, monitorAuthState } from "./auth.js";
  import {
    collection,
    addDoc,
    query,
    where,
    onSnapshot,
    deleteDoc,
    doc,
    updateDoc,
    orderBy,
    serverTimestamp
  } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-firestore.js";

  const taskInput = document.getElementById("task-input");
  const addTaskBtn = document.getElementById("add-task-btn");
  const todoList = document.getElementById("todo-list");

  let currentUser = null;

  monitorAuthState((user) => {
    currentUser = user;
    if (user) {
      loadTasks(user.uid);
    } else {
      todoList.innerHTML = "<p class='text-center'>Please log in to manage tasks.</p>";
    }
  });

  // Add Task
  addTaskBtn.addEventListener("click", async () => {
    if (!currentUser) return alert("Please log in first.");
    const text = taskInput.value.trim();
    if (!text) return;

    try {
      await addDoc(collection(db, "users", currentUser.uid, "tasks"), {
        text: text,
        completed: false,
        createdAt: serverTimestamp()
      });
      taskInput.value = "";
    } catch (error) {
      console.error("Error adding task: ", error);
    }
  });

  // Load Tasks (Real-time)
  function loadTasks(userId) {
    const q = query(
      collection(db, "users", userId, "tasks"),
      orderBy("createdAt", "desc")
    );

    onSnapshot(q, (snapshot) => {
      todoList.innerHTML = "";
      snapshot.forEach((docSnap) => {
        const task = docSnap.data();
        const li = document.createElement("li");
        li.className = `todo-item ${task.completed ? "completed" : ""}`;

        li.innerHTML = `
          <span class="task-text">${task.text}</span>
          <div class="task-actions">
            <button class="btn-check"><i class="fa-solid fa-check"></i></button>
            <button class="btn-delete"><i class="fa-solid fa-trash"></i></button>
          </div>
        `;

        // Toggle Complete
        li.querySelector(".btn-check").addEventListener("click", async () => {
          await updateDoc(doc(db, "users", userId, "tasks", docSnap.id), {
            completed: !task.completed
          });
        });

        // Delete Task
        li.querySelector(".btn-delete").addEventListener("click", async () => {
          if (confirm("Delete this task?")) {
            await deleteDoc(doc(db, "users", userId, "tasks", docSnap.id));
          }
        });

        todoList.appendChild(li);
      });
    });
  }
</script>

</html>